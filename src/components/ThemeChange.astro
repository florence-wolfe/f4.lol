---
import allThemes from 'daisyui/src/theming/themes';
const themes = Object.keys(allThemes);
---

<div title="Change Theme" class="dropdown dropdown-end z-10">
  <button aria-haspopup="true" aria-label="Themes menu button" class="btn btn-sm normal-case btn-accent">
    <i class="fa-solid fa-palette" class="w-2"></i>
    <span class="hidden font-normal md:inline">Themes</span>
    <i class="fa-solid fa-chevron-down w-2"></i>
  </button>

  <ul
    tabindex="0"
    role="menu"
    aria-label="Themes menu"
    class="dropdown-content h-[70vh] overflow-y-auto z-[1] p-2 shadow-2xl bg-base-300 rounded-box w-52 [&>li:not(:last-child)]:mb-1"
  >
    {
      themes.map((theme) => (
        <li
          data-act-class="[&_svg]:visible"
          class="relative overflow-hidden btn-outline hover:bg-transparent"
          data-theme={theme}
        >
          <input
            type="radio"
            name="theme-radios"
            class="radio theme-controller btn btn-sm btn-block justify-start"
            aria-label={theme}
            value={theme}
            onchange={`updateTheme('${theme}');`}
          />
          <div class="absolute right-2 top-1/2 h-1/2 transform -translate-y-1/2 flex flex-shrink-0 flex-wrap gap-1">
            <div class="bg-primary w-2 rounded" />
            <div class="bg-secondary w-2 rounded" />
            <div class="bg-accent w-2 rounded" />
            <div class="bg-neutral w-2 rounded" />
          </div>
        </li>
      ))
    }
  </ul>
</div>

<script is:inline>
function updateTheme(theme) {
  localStorage.setItem('theme', theme);
  document.documentElement.setAttribute('data-theme', theme);
}
</script>
